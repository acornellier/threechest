import type { SampleRoute } from '../../util/types.ts'
import { type DungeonKey, dungeonKeys } from '../dungeonKeys.ts'
import { decodeRoute } from '../../../server/decodeRoute'
import { mdtRouteToRoute } from '../../util/mdtUtil.ts'
import { getDirname } from '../../../server/files.ts'
import fs from 'fs'
import * as path from 'path'

type SampleRouteDefinition = Omit<SampleRoute, 'route'> & {
  mdt: string
  name?: string
}

const sampleRouteDefinitions: Record<DungeonKey, SampleRouteDefinition[]> = {
  cm: [
    {
      mdt: 'd0ZjmaWjvOywQqQBHQkTluunmuLJjAzi9mbtdHRjHTPu9nuyCiY5ukhufcwiIQEiIkMOku1fvHO2iQQ4Jik5KOOSsviXlruWoHFQcvgkIkTuvi0tvYuv1vvHK2QkuASQqKZIOq7LgmkDyjQfRq8yv0Krv5YsAZQ0NvinAjsNwfSAjIQxJOOzlKBJQQ2Tc1Vv0WrrCCjIYYfQNRGMUuxxb2UeHVJOuJxIiNhfP9JkB67ISRvYuKU47W9E4CquZub11Gd856iDCmJez4iqgjd7KzzxLOC0GQVRZbXX1X9AWir1suJePRZbXX1Xn5oiksqjC11k)pmEuhX15G4464(4hmE06CmZ4RKezU7AynQE2hMJ9fPGsy7IjdIIg6lsFr6lsrHGkO2cQVifecQGAlc(IuqiOIcrqSlieurHiyli8fPiTDDoJMXUU3q9ETfuFr6lsrWwq9fPOWwe8fPGKGk2ebbdBbHVifuBbn4BlOe(2UoNrZyxH69UvTfbFr6lsbHTG6lsXMGk2TfbFrkYnbvK8ebrM2ccFrkc2UoNrZyx3BOgQ2ccFb1xKcs2IGVifjHGkYcrqK7ccrYquiss2ccFBxNZOzSRqDREV2IcFr6BlO(IuWWwe8fPiPcQid2IcFrksBxNZOzSR79osOAl29DDoJMXUc17nuf5UVifPTTGHVG6lsrYtqfzAlY0xKcQGkc2Im4lsb1wKuFrkOcQiy76CgnJDDVH6w1wqYxq9fPiP2Im9fPGqqffIGy3wKbFrkccQGWwKuFrkiSDDoJMXUc179ETfB(cQVifzqqfjHTRZz0m219UnsOksQViffcQy32wK88fuFBrM(IuWW215mAg7kud17vKuFrkyiOcsIGytqisE22Im9fuFrksscQi3Sf7(2cg(2cs(2IK6lsrwiOIC3wKbFrkkSDDoJMXUkN3BOAlsQVG6BlOuFBrg8TfuE(IuKcQiiccQTiP(IuKPTij8fPGkOIGiiieeIcrHyxSlyy76CgnJDDVH69AlYGVGg8Tf00xKcQGksBrYWxKI0215mAg7kuV3TQTij8f7(IuqfurqeeeccrHOqSBly4Bli5lsb1wS5lsb1wK88TDDoJMXUU3qnuTfzHVy3xKcgcQGKTGHVifuBbjFrksBXMVTi55lsrHGkOIGiiieeIcrA76CgnJDfQB171wK7(IDFrk2eurYteezAly4lsrWwqY3wS5lsrWwK88TDDoJMXUU37iHQTiz476CgnJDfQ3BOky4lsbHTyZxKccBrYZxKIDbvWqeeKeeInrHi5j2fzAl29fPiPcQid22IKKVy33wWWxKIcBbjFBbL6Blss(2InFrkkSDDoJMXUU3qDRkObFrksbvqTfucFrkijOcgIGifecQOqqi2fBcgIcbjrYtSjcIKNy32wKB(IGVTGW3wS7lsrsiOISWwWWxKIDBbjFrkc2InFrk2TfjpFBxNZOzSRq9EVxBbLNVGKVife2UoNrZyx372iHQGHVifB2IKNVifjvqfzqeejHGqKfIcrUl2fugcgckjbjbDtSjc8ejpriTfB(IuSzBlOPVi55lsbbvqfebrqqqiieefIcbXUyxeOcgIqqqseieBIqHi5jc72UoNrZyxHAOEV2ck1xqP(IuKcQGkcIGTRZz0m2v58EdvrsYxKI0wqj8TTf0GVil8fPGkOIGiiieeIcBxNZOzSR7nuVxBbLWxK(2cQVTi4B76CgnJDfQ37wvKB(IuK222UIpC7J7Ehw7H(I03222fzxE0jZoEx8fZm(PKrohl)WmxZrk51ZEOVi9DXNVifHcsmNbjccE82zqktbvWVbIaZjTrdBusfjjgIGifesErHlYxj7YXvo25LJLCkTE5yjNsRK9HkhB5HCSLw5yzs5oEgnKJTC8CWy(4y7sRCSXZj)TDnwYBlO(U4ZxKcIckZjsszwquqjsbvWVjbpMtWyNxiqSr5TjcIuqi5ffUWS5yzYGOOdJhLJLSOfCSLhZhhlzrzWXo6HsuhYXY05ao2O6WHCSdzs5ZkhBp5yVhgT0MJTl9Wqo2rMdhE0CSdNCShUCSmDoGJTCCD8X0CSmjUoCyLpo27mMJTpW)khltNd4yplpMJLjdII4y7sR8NJTNCS8Vmzw5y7sRCSJmhoKJ9Ey0sBo2A5HhQXhnh7idAowMohCmrrCSJu5yp2J8rKmYXolrnMJ9CoyCZCBxJL82IGVl(8fPOGwWCsucsB0mWRqqf8lbbdMtQyFBFViWGhveePGqYlkCDugWFMWXolrnMJTlTYXgx(q0HXJYXwAnUYX2to2YLyEGpowYIiTDnwYBB76CgnJj3Yr1URmB8D676CgnJj3Yr1URmJVssq4Q8GEsoZOz8HXJk5TD11sQD9LpBMsMd5yj3JkzXXYpXhQJ5lIP2k',
    },
  ],
  dc: [
    {
      mdt: 'dWZEkaWjvIQzjcvULkrAxIGgMi6ycldLNHQPPQUMiTnvQVPKgNsCoLQdQsQwicLhQsenrvs4IQesBuekFuLqmsvcLtQskVuLiSt4NQeQgQiWsvjipvQMksxvLOSvvc0xfHQ2lnyj5WsklwsvpwPmzPWLLyZQYNrOA0IqoTuQvRsaVgHKzJOBJqQDJGFRIHRsslxuEUuY0vCDPOTRsI(UKknEjvCEeI1RsqTFr1gsTxRrJdHlyjRv7dbrkpP96wJ4NRDf2VoUexwIpbxmYU9PuNXoT22qeIQvEvcUSlsEvIL1UqObjrSVDipzjOgzzMY1i8osTVDipzjOgzzMY1AuhX3ETMZ5sEipzTjqCjMJ9MTBy)61o)Tl6fIqZ6sA)kRr2Si1(wZSScHP3SEYYvwifH9TMzzfctcAsskIf7tPq0TjqCR3(wZSScH5kAsG4LdHR1OoIiwT3Qqw2M2hcsfHiwCSF1MKKTKkcPIqQieCbt8fCrQ4lUfPIvXTyrSk2flIiPyxeHiskcMicrWfbteFrWfrQi(I4wePcMJGjvecMJGl1r8L6isL6yF7qEYS)E8Y75iysfCPIqWCeFPIqWfmbtWfFhrQuriycMG7yF7qEYSZlV3EXrWLkcPIqecMGVk4c(I4l47IuXpPJGjveIVJGlvecUJ4lveIubtC7isLkcX3X(2H8Kz)94fEXr8LkcPIqWtkycotWfCU4ly7Iubpe3c2QyvWwelc2TJGj1rKkveIubteoIBPoIvPoIfPoIGj1reFPo23oKNm78YE59CePsfmPIqK6i4sfHivWeFhXxQieRcMyXX(2H8Kz)9E1ZloIBPcgxQieHJ9Td5jZoV8E8IGTivecMGj4cUieFXxKksDeSDPIqecMG54iwLkwLkcX3rSivecUJ9Td5jZ(7Xl7fXTuri2fmrKuWfr44iwKkcPoIuPoIBPIqWemb3rSkvecMJyrQieHJ9Td5jZoV8EVNJyxQ9Td5jZ(7TxpViwKkcX3rWysfHG5iyHuriyocwsPIqWCeXIuriyoIyvQiemhrClvecMJisLkcbZre7sfHG54iIKsTVDipz25fE59eSVurichhresTVDipz2RfVhVi2LkcbtWeCbx8fFrQivClUfRIvXIyrSl2frsrKueHicrWCCebtQiKkcb)lycEQGl43oIiKkcr4i2LkcrWfmr8fCrKk(I42rejLkcr4yF7qEYS)E8Y75icUublvQieHJ9Td5jZoV8E7fhr8LkcUuriyo23oKNm7VhVWlIGjvecMGj4cU4l(IurQ4wClwfRIfXIyxSlIKIiPicreIG54iIuPI4lveIWreCPIqecMG7yF7qEYSZl7L3temPIqecMiUfCrSk(IyrKkIV4weCXQisflIyxSlyjfrsblCCeXTur8LkcbxWeFhrWLkcrQJ9Td5jZ(79QNxebtQiemMGjyCbxW(IVGLksfSBXTGTkwfSfXIGTl2f8KIiPGhIieCMJJiwLkcUuriUDSVDipz25L3JxebtQieCUGj4FbxWtDCeXIuri1rWK6isL6iUL6iwL6iwK6icMuri(lcM4ZeCX)w8f)vrQ4N6iIVuriwDSVDipz2FpEzV4iIDPc2TurichbpPuriycMGl4Iq8fFrQi1X(2H8KzNxEV3ZXXEw73CXFVwLPLuri1XXXEDlfIse2B0(9AV1KCiIGz)u)fOSnTKkcP2Bivec(EKWLKS9LpFDj(cM4szS7eMUNCLVEZ)SqWfH4lXeP2tSsHmV6Lvk5vZjV6QnjjZRigzTlCBcepVkXAxi0OvEvBc5veDtYP9vjl5vTktR8QevYk5v1ALxrOuAuAKxvRvE1KOcrYRQLviC5tE1uMevYknCStqI5iysT3qQie)K8eMY(P37)11LDbtCP)yjHlm(sSU(3zRcUieFjMi1EcAss2kVQnH8QjrTBLxvlRulVQwwjVIOAtOrE15Lx9YkL8Q3jJOtC5vnoeU8jVQUNSmIKxvR(tZjV6Dijp1TnbINxnjQ0QKxvQtTTHKijmV66eisEvPotwT8QTttctEfHsPrPrE1wnc5v1xYRUAtsYsJ8Q6lVtwjVAsujVISwRjVQ(tRwj0XobjMJJJc',
    },
  ],
  mw: [
    {
      mdt: 'd4J)haqjke1NOqPzrr4weQODPIk)Iqfggq6yqlJKNrLPbY1OQ2Mk4BQKgNk05ayHQOQhsOsnrkuSrke8rksNuLOvsHqVKcrUjHQQDI(jfQmuvQ8uknvvDvvuSvcvYzjuvwlfQAVYGjYHPOwmHYJPktwf5YkSzf9zvQA0aHttbRMcjVwLsZgu3McP2nG(nPgoq0XjuflNGNdutxPRtiBNIOVRsy8QO05vPy9eQs7NOoSpR5tN0afxdbWg0aJ(oqZEH571xAmz3RMA83asqnyuz3Xz3SVzV9MBbllD3zmvwYiiyya8e8nz90WAH7mdp2DCjWPUpRNgwlCNz4XUJlpD2iuwZIwT4wdRfma8(oFBwrgoLf24Vx8OeV3k(bcwSSM0mSOrFwprccdGRvKyWdtoGJywprccdG7DIGHJ(z3XWOna8(elRNibHbW1yeb8(Hg4LNoBevQSGhWdV1GgyFeJ(TzbPiyyW9rSpIq9rm6IQiu0f9JqXdTr8qFeJUOkEn6IhJqraTr0VpIrxBwpnSwi7C6gZzBu1hrO(igXOkQAJ4H(igHIQOF0fpeHIy0pQAJOFFeJqrv0p6IhIqrm6hvTz90WAHSUXCcy0gD9r8AFeJyBep2hXi2M1tdRfYoNUHB0gH6Ji2hXi2gvyFeJyufvTz90WAHSUbGXCgrvFeJyufHIUOFekQan6hDTTr)(iI9rmQAJkSpIrxufHAZ6PH1czNZPyUrev9rmI(rv8y0fbeHIhI(XRTTXd9re7Jy01gvyFeJ(Tz90WAHSUXC6gru1hXicAufrm6IOkcfrx0pIqTTXR9rxFBuH9rmETn633grvFeJ4HOkQIUiEncfXJr)icOnIyFBeQVnIG2hXigvrv0fDTz90WAHSZPBay0gp2hrq7JyequfrqJUiuek63M1tdRfY6gZ5C2gb0N1tdRfYoNaeZnIiG(igX22icAFwpnSwiRB4gZzubAFeJyufvTrxFeJyufvTTre7JQ(igXOkQAZ6PH1cznJZPBep2hXi22grvFe7JyeBZ6PH1czNt3yoBJORpQ6Jy0fvrO2ORpIXdTrO(igX2OFFeJyufp0M1tdRfY6gZjGrBeH6JkvFeJyufvrxeQnRNgwlKDoDd3iEOpIrSTnI(9XR9rmIrvu1M1tdRfY6gagZzBep0hD9rmc1gH6JyufvrxB8yFeJQOk6AJi23gvyFBev9Tz90WAHSZ5um3OnIx7JyFB01hXOFufV2gH6JyeQn63hXOkQIU24X(2iI9Tru13gvyFBwpnSwiRBmNUrBep2hp2hX4HOkETnc1hX4H2SEAyTq250namAJiG(i66JyeBZ6PH1czDJ5CoJa6JyeBBBZkyyUg3CcESG7JyFBBB2lgJBJy2tgMtdEIG3BIQSAXmQH3cUpI9zp1hXOd6W58DhVEesHOpGOkkoDqhphaakFFaoaqqaIUigH68r)SIVHzqilDXWyfgYsMxzjevgzzjpTiGRS0fgwqilbullb(wdGe85KLUCklDJwKS0fMbUYsRwwYSj1gojlbwB0dzPvWmyqilDJwKSKNwe8jzjdanPbWIdWGqql6KSeindELLmfb1eYsMIOjKLmfDMqwYmWtYsMIqYsInMAHHSKr6mgrJZeYsIjALL0ligcYsGV1aibllDPS0fArWNaASRS0kic8klzaOS0DNXuWTzb25BBBla',
    },
  ],
  of: [
    {
      mdt: 'd0J(laqiavPpbkvMfOq3cf1UaKHHehJYYq8munnqUgsTnu6BkvJduDoaoiGsSquKhckLjckOncOI(OsHgjGk5KGI6MaQu7K8tavXqbu8uQAQqDvav1wbLQ(kGkmwaLYAbuQ2RmyvCyi1Ivk1JbYKPsDzvzZQQpRu0OrsDAuy1Gc8ALsmBiUTsjTBG63kz4ijhhqjTCQ45ujtxX1HKTRuGVRuqJhuKZdkz)Q0zHZJ2T7fyy)ZXfJf4en3YVHO3CbZWW8l4mtfWata7aluNFEW0KhJg0aRT46EagG)gVhGthgpWUrGvEqlKLdWGg5nZdMb)xHZdAHSCag0iVzEWSBykbLhnQzbBlKLddWBgtn5rXWDEGvGnaimbCXjBbWM53a0iOEHZdcLJZd84rTnYBdEijlpiuoopWdWGcbjbLFEVTYa8MTDEqOCCEGhyikWB(wGHz3WuYma5D9qEGgglWHtwcQjpvOqqCfozHtKWjlzusKKznj2WjlbLij6epXMGs7j6KrjXMGN2taAsWdNSePjbiCtEqlKLt()N)()MejCIWdNSKLijsINGsqjEtEqlKLtE(7)b8s0HtwYSejzuAsg8WjlznnjE4ejCYse2ejrOt8KXtqjJ0KGhozj6M8GwilN8)p)XFjaHBAsqHtKWjlrGsKeH3K4HBsqHtwYSejz8epzusqjdkrNmstcq4M8GwilN88hG3)3KOdNiHBs8WjlrO0KOdNSKbLijJoXtgpbL48M0E4KLyBsWdNSeutEqlKLt())Vn)1KydNiHBsqHtwckrsKepXBs0HtwYytKKT3Kyd3KmkHtwcQjpOfYYjp)9)8xtApCIeUjXd3KOdNSeHsIKiwtInCYsMLijJ0K2d3KGhUjzucNSeDtYGcNSeDtEqlKLt()N)a8AsWdNiHtwYOtKKb1K4HtwY4jsYSepzKMeB4KLmEIKmOM8GwilN883)))njaHtw4KLGAsKWnjE4Meu4KLOtKKL4j2MeD4KLm4jsYaK4jojbLSMeB4MKrjCYs8ejrAYdAHSCY))a2M)AsgLWjdkCYsSnjJhozjEIKinj6Wjlr4jsIqAYdAHSCYZF83)3KmlCYGcNS0EtIoCYseOejrOBsgLWjlXMiP9M8GwilN8OT)N)AsgjCYcNSeBIKOBs0HtwIWMijYEINiWtqjcGMKrjCYsWtKeGM8GwilN8)p)9)njJhopOfYYjp)9)aEjcLWjlznjdq4KLSMMKbforc3K4HBsqHBsSHBsgD4KLGsKeBINijOeprNOtSP9M8GwilN8)p)XFnjJoCIyHtwYAsSHBYdAHSCYZFaE)FtYydNh0cz5K)))BZFjJnCYswttY2dNmlCYsqjsYAsacNS0EIKG3KOdNSe3sKeNstEqlKLtE(7)5VMKbpCIeozjYEtYSWnjaHtwYOKijZAs0HtwId1Kh0cz5K))5paVMKbiCYSWjlbirsgLMKThozj6M8GwilN883)))njcLWjBpCYs8ejrAYdAHSCY))a2M)AselCIqcNSK1Kh0cz5KN)4V)VPjVdJ)a88)UEJRWjlCttt(n892sYY7MX)ZaekKbwjJs(12WGhOXv4KfoV7WjlzwIKSepzjOykrN)))))pXMygEtEKWjlpHSdeDIKN5D4abL45noeq8euEMnwAGyBYpHtwIcq70ek77CiUrVVdVPjrcN3D4KLiKDGGtVdbNaWG2PtKeZSWbY4g7UbaaTXciXtwckMs05bUxOap3dkQUh0GDFpoOaFpOO6EgQF3d1mqqUNzTHODC76EOcfcY9yW49SrZUhQqpolex3Z2OM7HX)EG1c19adq5AUhhuGVhxJdAgBs9CpOO6EG1cfSdb5E2(HEUhgdmEp)LZ94c9)nW6EG1c19acn47HA0BW7ECT267Eq56DpOVhKf4nVhh0G38DpWgSDplW3Zq97EC)26cHXWybMHR5EM194AwuDpd1V7Hk0JZcPjp4yQjXdN3D4KLmlrswINSeumLOZ)))))NytmdVjps4KLNqiabirYZmeeaGaK45jCwGSeuEM5uaaeGM8t4KLy2aILfILVVVBuOWs30KGcN3D4KLiqgq0aOHOSVZHZjjsIziAAGaahoC(ofc8D4jEYsqXuIopW317EgQF3ZMimC)CCDpu)CE3ZSUNnx3ZSUhQqHGCpSW49Sv0B5DpUq58UhyTq5CpdAWB5Ey46E(mCCnaVn5bhtnj6W5Dhozjohci(onbILWUdbprsmtOPbIcbale9oCIbiXtwckMs05boqpGO(E(lN7zO(DpBKd4EOc94SqGX7HXa7CDpGxZ9G(E2MXM3J7hAK7zw3dA3UVNH63wVhgGN19qfkeK7z)Eya218q7(Ew)7Hkuii3JrPjp4yQjXgoV7WjlbTZcelaoTryHy5SjsIzcCcqSSCw4gfd((EINSeumLOZdBuJMb47Hkuii3ddWZ6E2ie79Sad6DpBeIFpmCDpUFOD3KhCm100ua',
    },
  ],
  psf: [
    {
      mdt: 'dKd8laqkGc6wqeTlGQggeoMWYe5zk10usxtQABQW3KkJtuCovYcHi9qOOAIaf5IQiP2iqH(iqPojeHxQIs1mbkWor)ufLYqvrQNQWuv1vvrj2QksYxvrjTxAWGCyGSyOWJvIjlkDzfTzaFgOYOHOonuA1aL41qrz2q1TvrSBvQFlLHRIILdPNlQA6sUUOY2bkPVdfz8QiX5vr16bkQ9dQn8DakB229PAIMhB7w2Vdhyce4AibyYr2)K81gJnyXrnpLYXdAPohZYddD6ZcyddbgrXoVZIFUJLgEd90GWNvnrIBGMVJLgEd90GWNvnrISNIC1bOCvdZB4nuS3GtKA5ih2SoadZIiBUlWC3zDK3byfeEUPVJLCOOZ7AKdd8jyDIldhl5qrN31PZHJltHJAopb7n4edhl5qrN3fyk3n4MTBKi7PiJO3r(j(CPW2U9LHmfwootoC88(YWxg(YqMKj5wULRYvzVSxMrEiVKDYiSKjFzi3wYaHVmKjzsUpSCS0WBOoaa2taalzYxg(Yq2jtYyl3Yizjt(YqMSKh(wYoFlzGWxgYTmj3xwYy7BjJEFlhln8gQJ9ea4AAj3(Yi5ldzyjJoFlzC5B5yPH3qDaaSN7PSZ3sg(YqgRYKm6TKbcFzixTKx(wwYvFzS6BjJdFlzNVLJLgEd1XEEnbaKrNVmKHLm8LHm6KjzCi3YiJLmq4BjV8TSK9(YWxgYuitYusULPTCvMwTKje(YqUktYElzGWxgYyB5yPH3qDaaaGXEAjp8LHVmKHmjx7TKjFzidlzNVmKHLmq4ldzitYDVLJLgEd1XEcaSNwYoFzcHVmKhwowA4nuhaa751u25ldzNLmq4ldzSAjV8LH8WYsMXxg(YqMoKjzQtULPElze(YqgwowA4nuh7jaaaGL8Yxg(YqUxLjzkJLSZxgYlzsMXsMXxgYWsgi8LHm6TCS0WBOoaaUWypTKbcFzk5ldzyjJoFlzC5B5yPH3qDSN7jaGLmcFzk8LHmjtYTLC1xgYKmj3YTCvUk7L9Yd5HSt2jZiZiVSCS0WBOoafaa7P8WxgYKmj3wwYi5l78LHmUSKPWxgYdzs2z5yPH3qDaaSNaaYdFzi7SSKX2x25ldz0zjtHVmKRwowA4nuh7jaW1uE4ld5Qmj7TSKXQVmf(Yq2B5yPH3qDaaSN7PSZxgYiJL8YxgY4YsE4ld5HLLm69LD(YqMqy5yPH3qDSNxtaa5LVmKjewYdFziZitYlllzC4ltBFzidlhln8gQdaaam2tlz05l78LHmfYKmLSKPWxgYmYK8YYXsdVH6ypba2t5HVmKbczsgHLLmY4ldFlzY3sE4ldzKKjzSTKD(YqMwTKbcFlzS6ldzNLm69LHmswY4WxgYKLJLgEd1baWEEnTKXLVm8TKD(YqM6TKbcFlzS6ldzglzC4ld52YXsdVH6ypbaaaSKje(Yy1xgYWsgh(YqgYKSZsg9(YqgYKmqy5yPH3qDaaCHXEAjtHVmw9LH8YsgBFlhln8gQJ9CpbaKD(wY4WxgYvlz07ldzsMKryj3(wwYuYx25ldzQtMKPmwY4W3sgz8LHmSCS0WBOoafaa7PLmT9LD(YqUryjJEFzixLjzVClpSCS0WBOoaa2taalzA1x25ld5oSKrVVmKDYKmJClVSCS0WBOo2taGRPLm177yPH3qDaaSN7PmT6ldzyj3(wYoFlz4Bjt9(YqgYKmj3YTCvUk7L9Yd5HSt2jZiZyjV8TSSCGIfOoBaa5NvEFz4Bzz5atZjMjdhzXcaGDjhEDUm5OHbyzUu59LHVJS(YqES7bpI1EexzqKI0wMKi5gbcWVE1N5kL6po6KBzixfPYEhNDS44WqGDoqOzHHWCqNPaH9ggAKdFE(jGUHHaH2YDNfgc5j6egQAWqlGYLFcdnqg053ZtaHfhgQAWqO5UHHY2W0nmuH8egAbVLFcdLVaHfnVLJBrQLm57iRVmK97mG)4crMiwtxzUKjjsgxhGFFTEK63RzIE5wgYvrQS3bySHcdDMC44WqradLVaHwWqycBHmmu2g2BWbdb2XfmeMWwiddDQpbJjkoOBWmmuH88ggAbzqyVHHWExnyiWo1ddbcOMOWqfYZZHHYIDA54wKAj3(oY6ldz6ib(J(de9i2r3wMKizQla)rATpTIOpoYi3YqUksL9oWCq3WqfiWbdDgqlywEyiq3zHHadAdyiqOTC3zHHkKXMhgAPHEprHHQgmeawWHCbdvippbgkpiGj(5WqGWeOZHHaqBNad1kKNOWqN0WipmewayO75m7ml4HHoDoC88WqyVHHkKXMhgcT1obgAb0nmegtyOL2jyG9EMfgcdq5NzHHA3Wqi3Wem0s7eGgAbcd8jm05TCOWqGdTL7mWqyZdElh3Iulllfa',
    },
  ],
  tm: [
    {
      mdt: 'dCtwjaWjjLOBjPq2LQkAysrhd1Yu5zinnbDnHSne8nbACc4CQkhukWcvLKhkPinrjL0fLuu2OKIQpkPuDsjvmtjLWnLue7e(PKc1qLc6PsmvLUQKcSxAWsIdJqwSQepwvmzPqxwHnROpRQsJwsvDAvPwTKc61QsQzJOBlPu2TuYVLQHRQklxOEoc10fDDPuBxsv(UQkmEjv68QQQ9ljTSRLFmgVwWwA89C((Pnz(V4S0(DJwg1Ksdimc8B9Q7)wQhrKThUwEAhhpALL2VqoQ3GuWwEAhhpALnSnjPGAjhJA7DRF9flpTJJhTYATDRFh9w1PX6k4RPfIhKJN8DVLRGfutl)1MKKyxb7koxbloXjybvqfHcMkIe8zkOUMIqxblytbbxbl4iXj4qtXfW10YtNShBzoPJ50uCUIZvWcoYuqDfSisCccMIqxblotrKRGfSPLNozp2cDmNFdtb1vCUcwWeeNGdAki4kybBkc6kyXzA5Pt2JTmN0bDykcDfNRGfmBkOUcwe0ue6kyrOPiYvWIitrqxblcnT80j7XwOJVXCAkICfNRGfCaXj4MMcQRGfFMIqxblIeNiOPiYvWccMccUcwqnT80j7XwMZ5l0HPGGR4CfS4Akob)zkOUcwWnnfrUcwe0uqWvWIitrqxblytlpDYESf6yoPdtrqxraxblytb9CfSGG4eNGkOIqblIeHccIitlpDYESL5Ko(gMIaUwE6K9yl0XCoNcMDfSGAk4ZvWIZuWnDfS4eNGkOIirOGGP4ZvWItCcQPP4ZvCUMcQRPGzxblcfNisqfemfFUcwekorKGkiyA5Pt2JTmNFVqhMcUPRGdDnT80j7XwOd6yofm7kyrqXjcyk4ZvWIqtbh5Ak(CfSiO4ebmnfm7koxtb11ue6AkICnfeCnfFUMcMDnfCORGfS4eNGkOMcoYvWc2uCSRP4oxtXrDnfxaxtlpDYESfI45Komf85k4qxbliiorOGkImfCKRGfN4eutlpDYESL5KoMttbtDfm7kybtfNGptbtWvWc20YtNShBHoMZVH4ZvWcMkobhAAk4qxbh0vWc2uWbCfSGfN4mT80j7XwMt6GomfCKR4OUcwCHItCrcQ4orO4OIiXjiiOIGIqrarK4tqWuCNRGfCK4eutlpDYESf64BmNMcMGR4OUcwCnfNGdkOIJfHcoGisWFMI7CfSGPItWSGk4ZuCnDfSi00YtNShBzoNVqhMcoOR4oxblytXXUcwWMIRPRGfuXjytlpDYESf6yoPdtbhW1YtNShBzoPJVH4cDfSGnnf8NR4c4kyXzkocUcwekob1uCrUcwqnT80j7XwOJ5ConfxtxXfWvWIJfN4obvWnnfhbxblcAkUixbliyA5Pt2JTmNFVqhMIJDfxaxblUpXjUqbvCnnfxKRGfbeNiOPLNozp2cDqhZPP4oxbh6AkOnDfSGfN4mfu2vWcwCIZ0YtNShBHiEoPdbZUMIlORGfSPGJCnfFUMMMwIFpZA8Cs8ij2vWUMMMw(br)2RtTAP(VUvdQfF3F)zP)snC8Ke7kyxln6kyryGVFYHuAuWRzW7eNOgrde(ZVabcBgOz03fkOcwe6RerwAq96VBSAL)Ats(U1VvRu7FvR8J3z9RwPb9Aw1ke)3GKK4QviUxTY)92vR0yVvTmRw5V2KKvRK1FuTsRr7mMiYQvQT(lexTY7wvRK1)nXvRqu8GOFAAPLVY00YtNSh3qIihzoQtRz31YtNSh3qIihzoQtJ1veAHO2zVM2j7XVB9RVY0soQBAzj6j))1exTsdRb1E1k1843Jwns(VPc',
    },
  ],
  tr: [
    {
      mdt: 'dKdXjaqkfQuZsesULskAxIqnmvPJjSmP6zqMgOUMOABIY3ePXbsNtv5GkuIfcI8qfQQjcczJkPWhbHAKkuHtQqXmvOI2j6Nkujdvjv9ufnvGRkcP2QcLQ9s)vHsAWs0Hvclwv0JLWKvIUSu2Ss9zvHgTi40IOvRqP8AfQYSHYTbb7wv1VL0WvfSCO65kjtxLRRq2Usk9DrigVsQCEqu7xbBiW5ILlR)J9g(QK1Fzo61zIS4X6yGiNJJXhIkqJ1X5yb58AR7CcwuCqE8wnuU(enepuUg4jB)lXGSZIkwfF9lWA31gZ)UkWzrfRIV(fyT7AJz56KWoxm6QJFfRIN8)rHKNZrjx6SyTq7TXDSU01asox7cSrnbolgHJ3(V5ONyT12WKHZIr44T)B9JWWK5oVwdcj)F0NolgHJ3(piA0)JT6)ywUozeqDUQH1kUK1FbYqM758HryyReidbYqGmKHNSlqgsKSlZ9KibYqMj7YupzUapzMapNfvSkUZ9g12BpzxGSlqgYE4jrcKHSNl7YWtclqgYmpzUazirEYmbYqI8CwuXQ4orT9(R5jrcKDbEsKaziJUSl7zEsybEYCbYqgEYmbYqM65SOIvXDU3OgQ5jHfi7cKHSJKDzh2tIeidjkKDj61ZzrfRI7e1(A7TNmxGSlWtIeidz86jHf4jZfidzUNmtGmKHSlZ8CwuXQ4o379tuZtMjq2fidzQNejqgYpzxc1tclqgYWtMlqgsypzMaziZ9KPc8CwuXQ4orT9g18KPcCwuXQ4o3Bu7RjdKazidppjubolQyvCNO2EV3sOcKHe5jrcKHmqYUSNkrYitcl7q9KFcKHS75j)eircKHms9KPcKHm3tcvGmKWEolQyvCN793tut(jqgsKNNmEfitfidzMSltLijYt(jqgsypNfvSkUtud12BpzecKPcKHew2Lq9Kqfidzi7YupjsGmKDypNfvSkUZfXEJAEYOlqMkWtcvGNZIkwf35EJA7T8tGmKHSlZ88KbsGmGf4jJxbYq2LDjsIKWsyzUmxMjZKqLPYpjuzQNZIkwf3jQT3FnpzalqgWcKHm8CwuXQ4o3Bud18KrUazxGNmcbYq29KPcKHmGk7YUNZIkwf3jQ912BpzKjqMkqgYaw2LrUNmEfidzi7Y4vIKriHLrxMldKmtgWYuzKlHkJm5NmsLXRmG65SOIvXDU37NOMNmsf4SOIvXDIA7nQjJxbYqIGLDjkxIKOmjSeLkZLiOYmj6tMkHFLqLWH8tc3LXRegjJqcdlJUeoxgijCMNm6cKHe55jdOcKriqgsypzQaziJmzxgPEY4vGmKWPYUegQejH)KWY8xzUmp8CwuXQ4o3Bu7R5jJpbYieidzQNmEfidzouzxMLjrYSujSmdQmxM9jZKPVYuzAiHkt7YpzkYZzrfRI7e12792t2Ffirc8K5c8Kzc8KPcKHm(KDzp8KXRazi7DzxgFsKS)kHLDKmx2H9KrxGmKHNZIkwf35E)9e18K9qGSlWtIe4jJqGmKzEYOlqgYupz8kqgYSq2LzDjsMHKWYmyzUml3ZzrfRI7e1qT92ZZjEY9nU27vTBLaziWZZZzI0AJNmCUm5ENSye2bzz86S(CS1kUvcKHaNlfidjC8Lye6R)2H2ZHrYUCn75qt8Bocofb9lEdjsgsyHKm3jeJd5hsO(puIT4F5QHYeA4Te1q5dJWWwnuM8FO8si5QHs8AfcdLfl(hkF2gklQq4zY)2YHYNlw1wouw)hktOMidLfviSR43INyTHsixhHpu(iED0ddLjxLypN)cjpzxGZLcKHeU)MyuGEJxy43Sq2LRze9eNM9(gPPzbcjrYqclKK5ohZqjEROcbi0(xou(a2ciN8)XHYlH2q5Z6QvdL7KpMWnuUaVo6F5qzcn82qzBrrcdLpKWIvTHYRouUyT1KlhkF2s()4q5dJwLqB5qzY)RouEj0gkh9)WimS2YHsioIHsiuFUYZ5VqYZZtb',
    },
  ],
  top: [
    {
      mdt: 'd0t5jaWjLiQxjfjULsKSlGQ(LkvmmvkhdAziEMetdjxtv12uv(gGgNkPZbKdkfPSqGspujknrGI2Ose8rvc1ivIqNePIvQsGxQevDtLiYof)ujkgksLoQuKQLQePEQunvfxvjQmwvczV0GLshguTyqXJvstgu6YQyZQYNLIA0QeDAKYQLIKEnqLzdYTbkSBa(TsnCKQwUK8CPW0rDDLW2vjOVlfX4vPsNxLQ2VKArh7n5CaNbTdlT3J26ci(EdX(cAWAVPTyjwQGz547VOMTFHWHwCCSVUOQ6aG7lGb6CHhidAFDrv1bat3fqqMp785ag0a0SWyFDrv1badMla08zdGoWExdsq7noqNvM2gGJbnFY2PFbeudhd6yqhdAqzdXXGg0qmezdc0r2GFoYMIJbnOS91n0UY(7voVNSH4ykoYgkhdAqzZVJbnOS5ZXGgu2(6gAxzVCEpqhztXXC1XGg0qmez7RBODL93RCkhdqhdAqzdEZr2aYXGguw2q5yixDmObLneGoY2x3q7k7LdOZ7ziGCKLn)oMRog0qziMIS91n0UY(79GPCmi6yqdkBqIJSbOJbnedXuKnGCKLnFogcXr2qqhzt5MJSHaYXGgu2(6gAxzVCEVYr2a0XGuoYMcXXGg0qmezdwCmObLTVUH2v2FVYb0r2C1XGuog0qmedAkMIHYqz(n)Mpdqz7RBODL9Y59Epdc0r2GFoYg83rw2aYXGuog0aYqmxnfZNHYG3m)genFgKiBWFhz7RBODL93demLJSbV5yqhzdXr2GuoYg83XGgu2GFoYgeOJS91n0UYE5uoVNbb5iBWRoYYgeDmiqhzd(5yqdXqmOS91n0UYoC89khzdsCmaDKnxDKni6iBqkhzd(7yqdr2GFog0uKniqhdAqz7RBODL93RCEpdE1r2qa5ilBWIJbb5iBFDdTRSxoVhOJbb6iBWphdAaAiMpztXr2GxDmObLLniLJHGoY2x3q7k7Vx5uogeOJbnfzd(5yqdsKniihdAqzzd(7ykfhdAqdXqmftr2qU5yqdkBFDdTRSxoGoVNbb6iBWRoYYg8ZXqkog0GYgc6yqdqdXGanfZVHY8z(nuMpdAaAiMRMISPGoY2x3q7k7V3dMYXuU5yqdXqmOSHqCmObLnKFhzdHYrw2GaDmKIJbneztbDKTVUH2v2lN3RCmLBog0umedLSHq5ilBWRogsXXGMISHGog0aYqm4nztbDKTVUH2v2FVYb0XuU5yqZNSHqCmOHiBiuoYYgeKJHuCmOHs2qqhdAiOHyWFtXGugkdsm)geLnf0r2(6gAxzVCEV3ZuU5yqZVSHqCmOPiBi)oYgcLJbnfzzd5MJHuCKnf0XGg0qmetXqzOmfz7RBODL93demLJPq5iBiFoYgYVJbnOSHq5ilBiOJbDKnehztHYXGgIHykMIbnugkZV5x2(6gAxzVCkN3Zqa6iBiFog0GYg83r2GFoYYY2RO94L59AC4gog0rww2EtG38MoGP9Crn9L9catql)YyFdtt9SYnCmOJDyDmObVrapsvk3O(UvOOmeZsrWpWtrUw(WRabAkg0qjyn)2PZRU9(9ILC1PU9Doq0a0CDlSWb08PAVOrD797f1TRWbu32aC0OVU9IX62MqJVSUTXEZxEUtd40FhAGb9v0ASbCNgqNd91Tnboe4Ud9WRGx32uQBx6nDRBHda26w6HGFFDlF5PUDPH3mnanx3cwO9g2l3vaQBBcn(Y6wy2nAa(62LeCWDwqFD76EbaUULwJ6w(YtDBdAWEQBPh(k4QBbCGxv3s)ciO6wSuFbY2biyLneh7W6yqZhOFWdeP(Ok4vq4VHywkkkkWtU(t9Ddibe(Bkg0qjyn)2xEAqq1TWRGbo0Pbx3YxEau3UEjCAaQBPbG31TGbna0QBHz3OrDlkBhGGvw2(6gAxrx4qhMp0bWB7yFDdTROlCOdZh6a7Dnu2HVG3l7gAxrdqZcwz785US9b(kFp4Au3s3L7IRBxcv0oaGf6Ezf',
    },
  ],
}

async function convertRouteDefinition({
  difficulty,
  name,
  mdt,
}: SampleRouteDefinition): Promise<SampleRoute> {
  const mdtRoute = await decodeRoute(mdt)
  const route = mdtRouteToRoute(mdtRoute)

  if (name) route.name = name

  return {
    difficulty,
    route,
  }
}

export type SampleRoutes = Record<DungeonKey, SampleRoute[]>

const sampleRoutes = dungeonKeys.reduce((acc, key) => {
  acc[key as DungeonKey] = []
  return acc
}, {} as SampleRoutes)

const difficultyToNum = (difficulty: SampleRoute['difficulty']) =>
  difficulty === undefined
    ? 0
    : difficulty === 'beginner'
      ? 1
      : difficulty === 'intermediate'
        ? 2
        : 3

const wclRankingToNum = (wclRanking: SampleRoute['wclRanking']) =>
  wclRanking === undefined ? -Infinity : wclRanking.rank

function sortSampleRoutes(route1: SampleRoute, route2: SampleRoute) {
  if (route1.wclRanking !== route2.wclRanking) {
    return wclRankingToNum(route1.wclRanking) - wclRankingToNum(route2.wclRanking)
  }

  if (route1.difficulty !== route2.difficulty) {
    return difficultyToNum(route1.difficulty) - difficultyToNum(route2.difficulty)
  }

  return route1.route.name.localeCompare(route2.route.name)
}

const dirname = getDirname(import.meta.url)

for (const dungeonKey of dungeonKeys) {
  for (const routeDefinition of sampleRouteDefinitions[dungeonKey]) {
    const sampleRoute = await convertRouteDefinition(routeDefinition)
    sampleRoutes[dungeonKey].push(sampleRoute)
  }

  const dungeonFolder = `${dirname}/${dungeonKey}`
  if (fs.existsSync(dungeonFolder)) {
    const files = fs.readdirSync(dungeonFolder)
    for (const file of files) {
      const sampleRoute = JSON.parse(
        fs.readFileSync(path.join(dungeonFolder, file)).toString(),
      ) as SampleRoute
      sampleRoutes[dungeonKey].push(sampleRoute)
    }
  }

  sampleRoutes[dungeonKey].sort(sortSampleRoutes)
}

export default async () => ({
  data: sampleRoutes,
})
